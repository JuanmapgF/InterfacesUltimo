<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script>
            let nombre = localStorage.getItem('nombre');
            let edad = localStorage.getItem('edad');
            let competiciones = JSON.parse(localStorage.getItem('competiciones'));
            let division;
            if (nombre === null || edad === null) {
                location.href = 'index.html';
            }
            if (edad >= 50) {
                division = "Veterano";
            } else if (edad >= 20) {
                division = "Senior";
            } else {
                division = "Juvenil";
            }
                        
            let competicionActual = '';
            switch (localStorage.getItem('participar')) {
                case '1':
                    competicionActual = 'Trofeo Rector';
                    break;
                case '2':
                    competicionActual = 'Campeonato Paralenkítico';
                    break;
                case '3':
                    competicionActual = 'Torneo Mundial';
                    break;
                case '4':
                    competicionActual = 'Evento Ivanland';
                    break;
                case '5':
                    competicionActual = 'Desafío CuatroTV';
                    break;
                case '6':
                    competicionActual = 'Campeonato BTA';
                    break;
                default:
                    location.href = 'competiciones.html';
                    break;
            }
        </script>
    </head>
    <body class="bg-light bg-gradient">

        <nav class="mt-3">
            <ul class="nav justify-content-center">
                <li class="nav-item">
                    <a class="nav-link active" href="index.html">Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="datos.html">Datos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="competiciones.html">Competiciones</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-danger" href="index.html" onclick="cerrar()">Cerrar Sesión</a>
                </li>
            </ul>
        </nav>

        <section class="container shadow-sm p-3 mb-5 bg-body rounded">

            <header>
                <h1 class="display-1"> <script>document.write(competicionActual);</script> </h1>
                <p class="mb-0 lead"> División: <strong><script>document.write(division);</script></strong></p>
                <hr/>
            </header>
                                 
            <div>Apuntar puntuación de cada disparo</div>
            <form class="container mt-4" action="ranking.html">
                <div class="mb-3 row g-3">
                    <div class="col-md-2">
                        <label for="inputPuntuacion" class="col-auto col-form-label"> Puntuación total (hay que poner el valor de cada disparo): </label>
                        <div>
                            <input type="number" class="form-control" id="puntuacion" required="">
                        </div>
                    </div>               
                </div>
                <div class="container text-center">
                    <button type="submit" class="btn btn-primary mb-3" onclick="calcularPuntuacion(puntuacion.value)">Enviar</button>
                </div>
            </form>
            

        </section>
        <script>
            function calcularPuntuacion(puntuacion) {
                localStorage.setItem('participarEn', null);
                location.href = 'ranking.html';
                localStorage.setItem('puntuacion', puntuacion);
            }
    
            function cerrar() {
                localStorage.clear();
            }
        </script>        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    </body>
</html>
